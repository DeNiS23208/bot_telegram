#!/usr/bin/env python3
"""–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
import sqlite3
import os
import sys

DB_PATH = os.getenv("DB_PATH", "/opt/bot_telegram/bot.db")

if not os.path.exists(DB_PATH):
    print(f"‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {DB_PATH}")
    sys.exit(1)

conn = sqlite3.connect(DB_PATH)
cur = conn.cursor()

tables = ["users", "subscriptions", "payments", "approved_users", "invite_links", "processed_payments"]
print("üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:")
print("-" * 40)
for table in tables:
    try:
        count = cur.execute(f"SELECT COUNT(*) FROM {table}").fetchone()[0]
        print(f"  {table:25s}: {count:5d} –∑–∞–ø–∏—Å–µ–π")
    except sqlite3.OperationalError:
        print(f"  {table:25s}: —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")

conn.close()

