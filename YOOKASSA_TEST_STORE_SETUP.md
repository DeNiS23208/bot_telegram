# Настройка тестового магазина ЮKassa

## ⚠️ Важно
Служба безопасности требует использовать **тестовый магазин** вместо реального для тестирования платежей.

## Шаги для переключения на тестовый магазин

### 1. Получение тестовых credentials

1. Войдите в личный кабинет ЮKassa: https://yookassa.ru/my
2. Перейдите в раздел **"Магазины"** или **"Настройки"**
3. Найдите ваш **тестовый магазин** (Test store)
4. Скопируйте следующие данные:
   - **Shop ID** (идентификатор магазина)
   - **Secret Key** (секретный ключ)

### 2. Обновление .env файла на сервере

После получения тестовых credentials, обновите файл `.env` на сервере:

```bash
# Подключитесь к серверу
ssh root@178.72.153.64

# Отредактируйте .env файл
cd /opt/bot_telegram
nano .env
```

Замените значения:
```env
# Старые значения (реальный магазин)
YOOKASSA_SHOP_ID=1214089
YOOKASSA_SECRET_KEY=live_xqrW7eHtiNmlzKHxfEjjVOEwExI0M4xGsGQz5H16xrk

# Новые значения (тестовый магазин)
YOOKASSA_SHOP_ID=<ваш_тестовый_shop_id>
YOOKASSA_SECRET_KEY=<ваш_тестовый_secret_key>
```

**Важно:** Тестовый secret key обычно начинается с `test_` вместо `live_`

### 3. Перезапуск сервисов

После обновления .env файла, перезапустите сервисы:

```bash
systemctl restart telegram-bot webhook
systemctl status telegram-bot webhook
```

### 4. Проверка работы

1. Проверьте логи сервисов на наличие ошибок:
```bash
journalctl -u telegram-bot -u webhook --since '1 minute ago' -n 50
```

2. Попробуйте создать тестовый платеж через бота

## Отличия тестового магазина

- ✅ Платежи не списываются реально (тестовые карты)
- ✅ Можно использовать тестовые карты для проверки
- ✅ Webhook'и работают так же, как в реальном магазине
- ✅ Все функции бота работают идентично

## Тестовые карты для проверки

ЮKassa предоставляет тестовые карты для проверки платежей:
- Успешный платеж: `5555 5555 5555 4444`
- Отклоненный платеж: `5555 5555 5555 4477`

## Возврат к реальному магазину

Когда будете готовы к продакшену, просто замените credentials обратно на реальные значения и перезапустите сервисы.

